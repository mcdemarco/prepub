<!DOCTYPE html>
<html>
	<head>
		<title>
			{{STORY_NAME}}
		</title>
		<meta charset="utf-8">
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.3/FileSaver.min.js"></script>
		<script>
/**
 * PrePub - Twine 2 Markdown Export Story Format
 * Based on Enscree
 * 
 * Copyright (c) 2017 M. C. DeMarco
 * https://www.mcdemarco.net/tools/scree/prepub/
 *
 * This license applies exclusively to the PrePub story format for Twine 2. No ownership of, nor
 * licensing restrictions on, the content within the generated story are stated or implied.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and
 * associated documentation files (the "Software"), to deal in the Software without restriction,
 * including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all copies or substantial
 * portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT
 * LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
		</script>
<script>(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
window.onload=function(){void 0===window.PrePub&&(window.PrePub={convert:function(){var t=this.export(),e=new Blob([t],{type:"text/markdown;charset=utf-8"});saveAs(e,"prepub"+Date.now()+".md")},export:function(){var t=[],e=window.document.getElementsByTagName("tw-storydata");e&&t.push(this.buildPassage("StoryTitle","",e[0].getAttribute("name")));for(var n=window.document.getElementsByTagName("tw-passagedata"),r=0;r<n.length;++r)t.push(this.buildPassageFromElement(n[r]));return t.join("")},buildPassageFromElement:function(t){var e=t.getAttribute("name");e||(e="Untitled Passage");var n=t.textContent;return this.buildPassage(e,n)},buildPassage:function(t,e){var n=[];return n.push("## ",t),n.push("\r\n",this.scrub(e),"\r\n\r\n"),n.join("")},markdownLinks:function(t){return t.replace(/\[\[(.*?)\]\]/g,function(t,e){var n,r=e.indexOf("|");if(-1!=r)n=e.substr(0,r),e=e.substr(r+1);else{var s=e.indexOf("->");if(-1!=s)n=e.substr(0,s),e=e.substr(s+2);else{var a=e.indexOf("<-");-1!=a&&(n=e.substr(a+2),e=e.substr(0,a))}}return n?"["+n+"]["+e+"]":"["+e+"]"})},scrub:function(t){return t&&(t=t.replace(/^##/gm," ##"),t=t.replace(/\\</gm,"&lt;"),t=t.replace(/\\>/gm,"&gt;"),t=this.markdownLinks(t)),t}}),window.PrePub.convert()};
},{}]},{},[1]);
</script>
	</head>
	<body>
		<pre id="output">
		
		</pre>
		<div id="storyData" style="display: none;">
{{STORY_DATA}}
		</div>
	</body>
</html>
